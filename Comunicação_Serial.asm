#INCLUDE <P16F628A.INC>

ORG 0
GOTO MAIN

ORG 0X04

BTFSC PIR1, TXIF
GOTO Trata_TX
BTFSC INTCON, INTF
GOTO Trata_INT
RETFIE

Trata_INT:
BCF INTCON, INTF
MOVF PORTA, 0
MOVWF TXREG
BCF INTCON, INTE
RETFIE

TRATA_TX:

BCF PIR1, TXIF
BSF INTCON, INTE
RETFIE

MAIN: 

BANKSEL CMCON
MOVLW B'00000111'
MOVWF CMCON

BANKSEL TXSTA 
MOVLW B'00100110'
MOVWF TXSTA 
MOVLW D'25'
MOVWF SPBRG 
MOVLW B'00010000'; Habilita a interrupção de transmissão do USART
MOVWF PIE1
MOVLW B'11010000'
MOVWF INTCON

BSF OPTION_REG, 6

BANKSEL TRISA
MOVLW 0xFF
MOVWF TRISA

BANKSEL RCSTA 
MOVLW B'10000000'
MOVWF RCSTA

END